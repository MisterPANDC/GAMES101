 ![[GAMES101_Lecture_04-1.jpeg]]

注意lec3上提到的旋转变换，具有逆矩阵等于装置矩阵的性质，即==正交矩阵==
 ![[Pasted image 20240306131237.png]]

![[GAMES101_Lecture_04-4.jpeg]]

# 3D Transformations
![[GAMES101_Lecture_04-5.jpeg]]

![[GAMES101_Lecture_04-6.jpeg]]

![[GAMES101_Lecture_04-7.jpeg]]

3维中的旋转比较复杂 ，首先是基本的三种绕轴旋转
![[GAMES101_Lecture_04-8.jpeg]]

而更为复杂的旋转，我们则将其分解为绕轴旋转
![[GAMES101_Lecture_04-9.jpeg]]


- [00:15:30](https://www.bilibili.com/video/BV1X7411F744?p=3#t=15:30.82) 
旋转公式，绕旋转轴n旋转$\alpha$
![[GAMES101_Lecture_04-10.jpeg]]
关于[四元数 - 维基百科，自由的百科全书 (wikipedia.org)](https://zh.wikipedia.org/zh-cn/%E5%9B%9B%E5%85%83%E6%95%B8)

![[GAMES101_Lecture_04-11.jpeg]]

# View Transformation
![[GAMES101_Lecture_04-12.jpeg]]
关键的三步：位置，角度与最后的投影(3d->2d )

![[GAMES101_Lecture_04-13.jpeg]]
注意还有一个 up direction的概念，是指在三维空间中由look-at direction确定一个二维平面，而为了成像我们还要进一步确定一个方向(比如拍照时相机横放竖放)


由于成像只取决于相机与物体（包括背景）的相对位置，因此我们直接取相机位置为原点，up-direction = y axis, look-at direction= -z axis
![[GAMES101_Lecture_04-14.jpeg]]

从原始坐标系转换为刚才约定的坐标
- [00:29:30](https://www.bilibili.com/video/BV1X7411F744?p=3#t=29:30.63) 
![[GAMES101_Lecture_04-15.jpeg]]
直接想旋转比较困难，考虑其逆矩阵，然后直接转置
![[GAMES101_Lecture_04-16.jpeg]]

![[GAMES101_Lecture_04-17.jpeg]]

![[GAMES101_Lecture_04-18.jpeg]]

# Projection Transformation
![[GAMES101_Lecture_04-19.jpeg]]
投影有两种，左边正交投影 而右边透视投影具有近大远小的性质
![[GAMES101_Lecture_04-20.jpeg]]


## Orthographic Projection
正交投影，相当于直接将look-at direction这个轴压缩即可
![[GAMES101_Lecture_04-21.jpeg]]

实际上的做法：
![[GAMES101_Lecture_04-22.jpeg]]
给定一个空间中的长方体，都可以变换到一个标准的立方体
![[GAMES101_Lecture_04-23.jpeg]]

![[GAMES101_Lecture_04-24.jpeg]]

![[GAMES101_Lecture_04-25.jpeg]]
得到立方体后，再做适口变换
## Perspective Projection
![[GAMES101_Lecture_04-26.jpeg]]

![[GAMES101_Lecture_04-27.jpeg]]
照片上，透视投影中，平行线上呈现相交的效果

- [00:55:18](https://www.bilibili.com/video/BV1X7411F744?p=3#t=55:18.18) 

![[GAMES101_Lecture_04-28.jpeg]]
齐次坐标乘上任意一个常数，仍然表示原来的点

![[GAMES101_Lecture_04-29.jpeg]]
定义近远两个面n与f，远的面f要大一些。因此处理的思路就是将f收缩到n的大小（缩小远处物体），构成一个长方体，然后做正交投影即可

![[GAMES101_Lecture_04-30.jpeg]]
挤压这一步，从相似的关系来看，其实就是沿着z轴设一个函数 $y'=\frac{n}{z} y$ 

![[GAMES101_Lecture_04-31.jpeg]]
由此我们可以确定x与y是怎么确定的

![[GAMES101_Lecture_04-32.jpeg]]
这里没有管z，直接看x与y的变换，其实z就是没变
![[GAMES101_Lecture_04-33.jpeg]]

![[GAMES101_Lecture_04-34.jpeg]]

![[GAMES101_Lecture_04-35.jpeg]]

![[GAMES101_Lecture_04-36.jpeg]]

最终解出第三行为$(0,0,n+f,-nf)$
注意一个非常反直觉的现象，中间点的z是会变的